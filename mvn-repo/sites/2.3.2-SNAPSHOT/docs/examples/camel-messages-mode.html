<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-05-26 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Vortex Gateway &#x2013; camel-messages-mode example</title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../../" id="bannerLeft">
                                                <img src="../../docs/images/Prismtech_Logo.png" alt="Prismtech" />
                </a>
                                            <a href="../../../" id="bannerRight">
                                                <img src="../../docs/images/gateway.png" alt="Vortex Gateway" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                  <div class="xright">                    <a href="../../.." title="Prismtech on the Web: www.prismtech.com">Prismtech on the Web: www.prismtech.com</a>
            |
                        <a href="../../../" title="Vortex Gateway">Vortex Gateway</a>
            
                 <span id="projectVersion">Version: 2.3.2-SNAPSHOT</span>
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Gateway</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../../docs/user-guide/index.html" title="User Guide">User Guide</a>
            </li>
                  <li class="none">
                          <a href="../../docs/LICENSE.html" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="../../docs/third_party_licenses.html" title="Third party licenses">Third party licenses</a>
            </li>
                  <li class="none">
                          <a href="../../changes-report.html" title="Changes">Changes</a>
            </li>
                  <li class="none">
                          <a href="../../docs/known_issues.html" title="Known Issues">Known Issues</a>
            </li>
                  <li class="none">
                          <a href="../../docs/faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                  <li class="none">
                          <a href="../../docs/examples/examples-list.html" title="Examples list">Examples list</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/chatroom.html" title="Chatroom">Chatroom</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/chatroom-jms.html" title="Chatroom with JMS">Chatroom with JMS</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/chatroom-rest.html" title="Chatroom with Rest">Chatroom with Rest</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/chatroom-pollEnrich.html" title="Chatroom with pollEnrich">Chatroom with pollEnrich</a>
            </li>
                  <li class="none">
            <strong>Camel Messages mode</strong>
          </li>
                  <li class="none">
                          <a href="../../docs/examples/shapes-java.html" title="Shapes in Java">Shapes in Java</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/pingpong.html" title="PingPong">PingPong</a>
            </li>
          </ul>
                       <h5>Powered by</h5>
                                                                                                                                               <a href="http://www.opensplice.com/" title="Vortex OpenSplice" class="poweredBy">
        <img class="poweredBy"  alt="Vortex OpenSplice" src="../../docs/images/logo_opensplice_dds.gif"     />
      </a>
                                                                                                                      <a href="http://camel.apache.org/" title="Apache Camel" class="poweredBy">
        <img class="poweredBy"  alt="Apache Camel" src="../../docs/images/logo_camel.png"     />
      </a>
                                                                                                                <a href="http://maven.apache.org/" title="Apache Maven" class="poweredBy">
        <img class="poweredBy"  alt="Apache Maven" src="http://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
                     
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2><a name="camel-messages-mode_example"></a>camel-messages-mode example</h2>
<div class="section">
<h3><a name="a1_Description"></a>1) Description</h3>
<p>The camel-messages-mode examples demonstrates routing of camel messages with Vortex OpenSplice as the underlying transport. Note : in these examples the data is not IDL-typed, its just a Serializable Java object.</p></div>
<div class="section">
<h3><a name="a2_Design"></a>2) Design</h3>
<p>We have 2 examples:</p>
<p>The first one with one simple string message. The second one using POJO.</p>
<div class="section">
<h4><a name="Example_1"></a>Example 1</h4>
<p>It consists of 1 unit :</p>
<ul>
<li>StringMessage: This example demonstrates routing of camel messages with string as the message body.</li></ul></div>
<div class="section">
<h4><a name="Example_2"></a>Example 2</h4>
<p>It consists of 2 units :</p>
<ul>
<li>POJOMessage: This example demonstrates routing of camel messages with a serializable Java Object as the message body. The Java Object in this example is has two variables describing a location: &quot;city&quot; of type String and &quot;zip&quot; of type integer.</li>
<li>LocationPOJO : A serializable class wich defines the zip code (&quot;zip&quot;) and the name of a city (&quot;city&quot;).</li></ul></div></div>
<div class="section">
<h3><a name="a3_Scenario"></a>3) Scenario</h3>
<div class="section">
<h4><a name="Example_1"></a>Example 1</h4>
<p>A java client sends a message (String) through CamelOS by using &quot;send&quot; method. CamelOS creates then a DDS data &quot;CamelMessage&quot; in wich it includes the message then it sends it to DDS. When a message comes from DDS, it will be displayed by &#xe0; process defined in the route &quot;from (dds ...)&quot;.</p>
<ul>
<li>In the figure below we see the two routes used in Camel server</li></ul>
<div class="section">
<h5></h5><img src="../images/examples/camelmessage_string_example.jpeg" alt="Figure caption" />
<ul>
<li>The sample CamelMessage contains 5 fields :
<ul>
<li>string&#160;&#160;&#160;&#160;&#160;message_id;&#160;&#160;&#160;&#160;&#160;(string type)</li>
<li>string&#160;&#160;&#160;&#160;&#160;&#160;&#160;target;&#160;&#160;&#160;&#160;&#160;&#160;(long type)</li>
<li>CamelHeaders&#160;&#160;&#160;&#160;&#160;headers;&#160;&#160;&#160;&#160;&#160;(string type)</li>
<li>SerializedPOJO&#160;&#160;&#160;&#160;&#160;body;&#160;&#160;&#160;&#160;&#160;(string type)</li>
<li>CamelAttachments&#160;&#160;&#160;&#160;&#160;attachments;&#160;&#160;&#160;&#160;&#160;(string type)</li></ul></li></ul></div></div>
<div class="section">
<h4><a name="Example_2"></a>Example 2</h4>
<p>A java client sends a serializable Java Object as the message body through CamelOS by using &quot;send&quot; method. CamelOS creates then a DDS data &quot;CamelMessage&quot; in wich it includes the message then it sends it to DDS. When a message comes from DDS, it will be displayed by &#xe0; process defined in the route &quot;from (dds ...)&quot; after extracting the POJO Data </p>
<ul>
<li>In the figure below we see the two routes used in Camel server</li></ul>
<div class="section">
<h5></h5><img src="../images/examples/camelmessage_pojo_example.jpeg" alt="Figure caption " />
<ul>
<li>The sample CamelMessage contains 5 fields :
<ul>
<li>string&#160;&#160;&#160;&#160;&#160;message_id;&#160;&#160;&#160;&#160;&#160;(string type)</li>
<li>string&#160;&#160;&#160;&#160;&#160;&#160;&#160;target;&#160;&#160;&#160;&#160;&#160;&#160;(long type)</li>
<li>CamelHeaders&#160;&#160;&#160;&#160;&#160;headers;&#160;&#160;&#160;&#160;&#160;(string type)</li>
<li>SerializedPOJO&#160;&#160;&#160;&#160;&#160;body;&#160;&#160;&#160;&#160;&#160;(string type)</li>
<li>CamelAttachments&#160;&#160;&#160;&#160;&#160;attachments;&#160;&#160;&#160;&#160;&#160;(string type)</li></ul></li></ul></div></div></div>
<div class="section">
<h3><a name="a4_BuildingRunning_of_examples"></a>4) Building/Running of examples</h3>
<div class="section">
<h4><a name="Environment_Setup"></a>Environment Setup</h4>
<ul>
<li>Make sure to have Maven executable (mvn) and Java executable in PATH.</li>
<li>Make sure to have Vortex OpenSplice environment set (on Linux sourcing Vortex OpenSplice's release.com file).</li></ul></div>
<div class="section">
<h4><a name="Building_the_example:"></a>Building the example:</h4>
<ul>
<li>Change directory to examples/camel-messages-mode and execute:
<ul>
<li><i>mvn package</i> </li></ul></li></ul></div>
<div class="section">
<h4><a name="Running_the_Java_example:"></a>Running the Java example:</h4>
<div class="section">
<h5><a name="Example_1."></a>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Example 1. </h5>
<ul>
<li>Start the Vortex OpenSplice services:
<ul>
<li><i>ospl start</i></li></ul></li>
<li>Open a command prompt and change directory to examples/camel-messages-mode. Enter the following command:
<ul>
<li><i>mvn exec:java -Dexec.mainClass=com.prismtech.gateway.examples.camelmessage.StringMessage</i></li></ul></li>
<li>Type a string message and press <i>ENTER</i>.
<p>The message will be routed back to the application and displayed. If multiple instances of the application are executed, all the instances will receive the message.</p></li>
<li>Type <i>'quit'</i> and press <i>ENTER</i> to exit the application.</li></ul></div>
<div class="section">
<h5><a name="Example_2."></a>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Example 2. </h5>
<ul>
<li>Start the Opensplice services (<i>ospl start</i>).</li>
<li>Open a command prompt and change directory to examples/camel-messages-mode. Enter the following command:
<ul>
<li><i>mvn exec:java -Dexec.mainClass=com.prismtech.gateway.examples.camelmessage.POJOMessage</i></li></ul></li>
<li>Type city,zip and press <i>ENTER</i>. (Where city is a string and zip is numeric - Example: Boston,01803 )
<p>The Java Object will be serialized and routed back to the application and displayed. If multiple instances of the application are executed, all the instances will receive the message.</p></li>
<li>Type <i>'quit'</i> and press <i>ENTER</i> to exit the application.</li></ul></div></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2017.
          All rights reserved.    
                 <span id="publishDate">Last Published: 2017-05-26</span>
                        </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
