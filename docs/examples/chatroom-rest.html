<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-05-26 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Vortex Gateway &#x2013; chatroom-rest example</title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../../" id="bannerLeft">
                                                <img src="../../docs/images/Prismtech_Logo.png" alt="Prismtech" />
                </a>
                                            <a href="../../../" id="bannerRight">
                                                <img src="../../docs/images/gateway.png" alt="Vortex Gateway" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                  <div class="xright">                    <a href="../../.." title="Prismtech on the Web: www.prismtech.com">Prismtech on the Web: www.prismtech.com</a>
            |
                        <a href="../../../" title="Vortex Gateway">Vortex Gateway</a>
            
                 <span id="projectVersion">Version: 2.3.2-SNAPSHOT</span>
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Gateway</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../../docs/user-guide/index.html" title="User Guide">User Guide</a>
            </li>
                  <li class="none">
                          <a href="../../docs/LICENSE.html" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="../../docs/third_party_licenses.html" title="Third party licenses">Third party licenses</a>
            </li>
                  <li class="none">
                          <a href="../../changes-report.html" title="Changes">Changes</a>
            </li>
                  <li class="none">
                          <a href="../../docs/known_issues.html" title="Known Issues">Known Issues</a>
            </li>
                  <li class="none">
                          <a href="../../docs/faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                  <li class="none">
                          <a href="../../docs/examples/examples-list.html" title="Examples list">Examples list</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/chatroom.html" title="Chatroom">Chatroom</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/chatroom-jms.html" title="Chatroom with JMS">Chatroom with JMS</a>
            </li>
                  <li class="none">
            <strong>Chatroom with Rest</strong>
          </li>
                  <li class="none">
                          <a href="../../docs/examples/chatroom-pollEnrich.html" title="Chatroom with pollEnrich">Chatroom with pollEnrich</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/camel-messages-mode.html" title="Camel Messages mode">Camel Messages mode</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/shapes-java.html" title="Shapes in Java">Shapes in Java</a>
            </li>
                  <li class="none">
                          <a href="../../docs/examples/pingpong.html" title="PingPong">PingPong</a>
            </li>
          </ul>
                       <h5>Powered by</h5>
                                                                                                                                               <a href="http://www.opensplice.com/" title="Vortex OpenSplice" class="poweredBy">
        <img class="poweredBy"  alt="Vortex OpenSplice" src="../../docs/images/logo_opensplice_dds.gif"     />
      </a>
                                                                                                                      <a href="http://camel.apache.org/" title="Apache Camel" class="poweredBy">
        <img class="poweredBy"  alt="Apache Camel" src="../../docs/images/logo_camel.png"     />
      </a>
                                                                                                                <a href="http://maven.apache.org/" title="Apache Maven" class="poweredBy">
        <img class="poweredBy"  alt="Apache Maven" src="http://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
                     
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2><a name="chatroom-rest_example"></a>chatroom-rest example</h2>
<div class="section">
<h3><a name="a1_Description"></a>1) Description</h3>
<p>The basic <a href="./chatroom.html">chatroom</a> example is used to illustrate Camel's routing mechanism associated with Rest connector.</p></div>
<div class="section">
<h3><a name="a2_Scenario"></a>2) Scenario</h3>
<p>The http page sends a request with a userID and a messageId. Camel server receive this request and through the routes will send the userId and the messageId under a SimpleChatmessage sample to Vortex OpenSplice. Vortex OpenSplice will send this sample again to Camel and through the routes coming from DDS, it posts this message so that all users can update the All chat messages. </p>
<ul>
<li>In the figure below we see the two routes used in Camel server<img src="../images/examples/chatroom-rest.jpeg" alt="Figure caption " /></li>
<li>The sample contains 3 fields :
<ul>
<li>string&#160;&#160;&#160;&#160;&#160;userID;&#160;&#160;&#160;&#160;&#160;(string type)//&#160;owner of message</li>
<li>long&#160;&#160;&#160;&#160;&#160;&#160;&#160;index;&#160;&#160;&#160;&#160;&#160;&#160;(long type)//&#160;message number</li>
<li>string&#160;&#160;&#160;&#160;&#160;content;&#160;&#160;&#160;&#160;&#160;(string type)//&#160;message body</li></ul></li></ul></div>
<div class="section">
<h3><a name="a3_Design"></a>3) Design</h3>
<p>It consists of 2 units :</p>
<ul>
<li>CRestDdsExample : Defines the routes used in Camel server.</li>
<li>ChatServiceSession : a class providing Chat operations (postMessage, getAllMessages...)</li></ul></div>
<div class="section">
<h3><a name="a4_BuildingRunning"></a>4) Building/Running</h3>
<div class="section">
<h4><a name="Environment_Setup"></a>Environment Setup</h4>
<ul>
<li>Make sure to have Maven executable (mvn) and Java executable in PATH.</li>
<li>Make sure to have Vortex OpenSplice environment set (on Linux sourcing Vortex OpenSplice's release.com file).</li></ul></div>
<div class="section">
<h4><a name="Building_the_example:"></a>Building the example:</h4>
<ul>
<li>Change directory to examples/chatroom-rest and execute:
<ul>
<li><i>mvn package</i> </li></ul></li></ul></div>
<div class="section">
<h4><a name="Running_the_Java_example:"></a>Running the Java example:</h4>
<ul>
<li>Start the Vortex OpenSplice services:
<ul>
<li><i>ospl start</i></li></ul></li>
<li>Open a command prompt and change directory to examples/chatroom-rest. Enter the following command:
<ul>
<li><i>mvn exec:java</i></li></ul></li>
<li>For each user open a web browser and enter the following url: 
<ul>
<li><a class="externalLink" href="http://localhost:9080/login.html">http://localhost:9080/login.html</a></li></ul></li></ul></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2017.
          All rights reserved.    
                 <span id="publishDate">Last Published: 2017-05-26</span>
                        </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
